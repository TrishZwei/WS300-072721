<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Animation</title>
	<style type="text/css">
		body{
			font-family: Verdana, Arial, Sans;
			font-size: 16px;
		}	

		.stage{
			position: absolute;
			top: 10px;
			left: 10px;
			bottom:10px;
			right: 10px;
			background-color: #59744B; 
			background-image: url('images/fullbackground.jpg');
			border: 1px solid black;
			background-position: 0px 0px; 
			background-repeat: repeat-x;
			overflow: hidden;
		}

		#dragon{
			position: absolute;
			top: 100px;
			left: 100px;
			width: 200px;
			height: 144px;
			background-position: 0px 0px; 
			background-image: url('images/dragon2.png');
		}


	</style>
</head>
<body>
<div class="stage">
	<div id="dragon"></div>	
</div>
<!-- jQuery below other elements -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<!-- jQuery plugins -->
<!-- custom script that accesses jQ and any plugins -->
<script type="text/javascript">
	//pan background
	let speedX = 0;
	let speedY = 0;
	let dir = 'right';

	function panBackground(){
		if(dir == 'right'){
		speedX -= 3;			
		}else{
		speedX += 3;
	}

		$('.stage').css({'background-position': speedX+'px '+speedY+'px' });
		window.requestAnimationFrame(panBackground);

	}

	panBackground();
//directional toggle:

	$(document).keydown( function(evt){
		if(evt.which == 32){
			if(dir == 'right'){
				dir = 'left';
			}else{
				dir = 'right'
			}

		}

	})


//dragonFlap
	let currFrame = 0;

	function dragonFlap(){
		const frames = [0,1,2,3], //4 frames
			  frameWidth = 200;
		let bgPos = -(frameWidth * frames[currFrame])
		$('#dragon').css({'background-position': bgPos+'px 0px'});
		currFrame++;
		if(currFrame == frames.length){
			currFrame = 0;
		}	
	}

setInterval(dragonFlap, 1000/10)

	
</script>
</body>
</html>